import{r as n,j as e,L as O}from"./app-BoxwSuQf.js";function T({user:y}){const[r,h]=n.useState(1),[s,j]=n.useState({targetDescription:"",personalInformation:"",summaryOfQualifications:"",education:"",technicalSkills:"",relatedExperience:"",honorsAndActivities:""}),[u,g]=n.useState(!1),[b,v]=n.useState(null),[N,w]=n.useState(0),[S,p]=n.useState(!1),[k,x]=n.useState(!1),o=[{step:1,title:"Target Description",field:"targetDescription",placeholder:`Enter job description or describe yourself (e.g., "I'm good at programming")`,maxLength:500},{step:2,title:"Personal Information",field:"personalInformation",placeholder:"name, address, GitHub, LinkedIn",maxLength:300},{step:3,title:"Summary of Qualifications",field:"summaryOfQualifications",placeholder:"Describe your key qualifications and strengths",maxLength:400},{step:4,title:"Education",field:"education",placeholder:"Put your schools, achievements or degree, and school year",maxLength:400},{step:5,title:"Technical Skills",field:"technicalSkills",placeholder:"List your technical skills and technologies",maxLength:300},{step:6,title:"Related Experience",field:"relatedExperience",placeholder:"Put your company name, your role, what you did, and the year",maxLength:600},{step:7,title:"Honors and Extracurricular Activities",field:"honorsAndActivities",placeholder:"List your honors, awards, and extracurricular activities",maxLength:400}],A=(t,i)=>{j(a=>({...a,[t]:i}))};n.useEffect(()=>{localStorage.getItem("hasSeenWelcomeModal")||p(!0)},[]);const C=()=>{localStorage.setItem("hasSeenWelcomeModal","true"),p(!1)},L=()=>{r<7&&h(r+1)},D=()=>{r>1&&h(r-1)},I=async()=>{var i;if(!o.every(a=>(s[a.field]||"").trim().length>0)){alert("Please fill all required fields before generating your resume.");return}g(!0);try{const d=await(await fetch("/dashboard/generate-resume",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((i=document.querySelector('meta[name="csrf-token"]'))==null?void 0:i.getAttribute("content"))||""},body:JSON.stringify({targetDescription:s.targetDescription,personalInfo:s.personalInformation,summaryOfQualifications:s.summaryOfQualifications,education:s.education,technicalSkills:s.technicalSkills,relatedExperience:s.relatedExperience,honorsAndActivities:s.honorsAndActivities})})).json();d.success?(v(d.optimizedData),w(d.atsScore),x(!0)):alert("Failed to generate resume: "+d.error)}catch(a){console.error("Error generating resume:",a),alert("An error occurred while generating the resume")}finally{g(!1)}},E=async()=>{var t;if(b)try{const i=await fetch("/dashboard/download-resume",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""},body:JSON.stringify({optimizedData:b,template:"it"})});if(i.ok){const a=await i.blob(),d=window.URL.createObjectURL(a),m=document.createElement("a");m.href=d,m.download="resume.pdf",document.body.appendChild(m),m.click(),document.body.removeChild(m),window.URL.revokeObjectURL(d),x(!1)}else alert("Failed to download resume")}catch(i){console.error("Error downloading resume:",i),alert("An error occurred while downloading the resume")}},l=o.find(t=>t.step===r),c=s[l==null?void 0:l.field]||"",f=o.every(t=>(s[t.field]||"").trim().length>0);return e.jsxs(e.Fragment,{children:[e.jsx(O,{title:"Dashboard - BIODATA"}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-950 to-gray-900",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("div",{}),e.jsx("a",{href:"/logout",className:"rounded-lg bg-red-600 px-4 py-2 font-bold text-white transition-colors hover:bg-red-700",children:"Logout"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h1",{className:"mb-2 text-4xl font-bold text-white",children:["Welcome back, ",y.name,"!"]}),e.jsx("p",{className:"text-blue-300",children:"Create your AI-powered resume in 7 simple steps"})]})]}),e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"grid gap-8 lg:grid-cols-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"mb-2 flex justify-between text-sm text-blue-300",children:[e.jsxs("span",{children:["Step ",r," of 7"]}),e.jsxs("span",{children:[Math.round(o.filter(t=>(s[t.field]||"").trim().length>0).length/7*100),"% Complete"]})]}),e.jsx("div",{className:"h-2 rounded-full bg-gray-700",children:e.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 transition-all duration-300",style:{width:`${o.filter(t=>(s[t.field]||"").trim().length>0).length/7*100}%`}})})]}),l&&e.jsxs("div",{className:"rounded-xl border border-blue-500/20 bg-gray-800/50 p-8 backdrop-blur-sm",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"mb-2 text-2xl font-bold text-white",children:[r,". ",l.title," ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("div",{className:"text-red-400",children:"Required field"}),e.jsxs("div",{className:"text-gray-400",children:["Character limit: ",c.length,"/",l.maxLength]})]})]}),e.jsx("textarea",{value:c,onChange:t=>{t.target.value.length<=l.maxLength&&A(l.field,t.target.value)},placeholder:l.placeholder,className:`h-32 w-full rounded-lg border px-4 py-3 text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500/20 focus:outline-none ${c.trim()?"border-gray-600 bg-gray-700/50 focus:border-blue-500":"border-red-500 bg-red-900/20 focus:border-red-400"}`,maxLength:l.maxLength}),!c.trim()&&e.jsx("div",{className:"mt-2 text-sm text-red-400",children:"This field is required to continue."}),e.jsxs("div",{className:"mt-6 flex justify-between",children:[e.jsx("button",{onClick:D,disabled:r===1,className:"rounded-lg bg-gray-600 px-6 py-3 font-bold text-white transition-colors hover:bg-gray-500 disabled:cursor-not-allowed disabled:bg-gray-700 disabled:text-gray-500",children:"Previous"}),r<7?e.jsx("button",{onClick:L,disabled:!c.trim(),className:"rounded-lg bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-3 font-bold text-white transition-all duration-200 hover:from-blue-700 hover:to-purple-700 disabled:cursor-not-allowed disabled:from-gray-600 disabled:to-gray-600",children:"Next"}):e.jsx("button",{onClick:I,disabled:u||!f,className:"transform rounded-lg bg-gradient-to-r from-green-600 to-emerald-600 px-6 py-3 font-bold text-white transition-all duration-200 hover:scale-105 hover:from-green-700 hover:to-emerald-700 disabled:scale-100 disabled:cursor-not-allowed disabled:from-gray-600 disabled:to-gray-600",children:u?"Generating with AI...":f?"Generate AI Resume":"Fill all fields first"})]})]}),e.jsx("div",{className:"mt-8 grid grid-cols-7 gap-2",children:o.map(t=>{const a=(s[t.field]||"").trim().length>0;return e.jsxs("div",{className:`rounded-lg p-3 text-center text-xs transition-all ${t.step===r?"bg-blue-600 text-white":a?"bg-green-600 text-white":"bg-gray-700 text-gray-400"}`,children:[e.jsx("div",{className:"font-bold",children:a&&t.step!==r?"✓":t.step}),e.jsx("div",{className:"mt-1 truncate",children:t.title})]},t.step)})}),e.jsx("div",{className:"mt-6 flex flex-wrap justify-center gap-2",children:o.map(t=>e.jsx("button",{onClick:()=>h(t.step),className:`rounded px-3 py-1 text-sm transition-colors ${t.step===r?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:t.step},t.step))})]}),e.jsxs("div",{className:"rounded-xl border border-green-500/20 bg-gray-800/50 p-6 backdrop-blur-sm",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold text-white",children:"📄 Live Resume Preview"}),e.jsxs("div",{className:"max-h-96 space-y-4 overflow-y-auto text-sm",children:[s.personalInformation&&e.jsxs("div",{className:"rounded-lg bg-gray-700/50 p-4",children:[e.jsx("h3",{className:"mb-2 font-bold text-blue-300",children:"Personal Information"}),e.jsx("div",{className:"whitespace-pre-wrap text-gray-300",children:s.personalInformation})]}),s.targetDescription&&e.jsxs("div",{className:"rounded-lg bg-gray-700/50 p-4",children:[e.jsx("h3",{className:"mb-2 font-bold text-blue-300",children:"Target Description"}),e.jsx("div",{className:"whitespace-pre-wrap text-gray-300",children:s.targetDescription})]}),s.summaryOfQualifications&&e.jsxs("div",{className:"rounded-lg bg-gray-700/50 p-4",children:[e.jsx("h3",{className:"mb-2 font-bold text-blue-300",children:"Summary of Qualifications"}),e.jsx("div",{className:"whitespace-pre-wrap text-gray-300",children:s.summaryOfQualifications})]}),s.education&&e.jsxs("div",{className:"rounded-lg bg-gray-700/50 p-4",children:[e.jsx("h3",{className:"mb-2 font-bold text-blue-300",children:"Education"}),e.jsx("div",{className:"whitespace-pre-wrap text-gray-300",children:s.education})]}),s.technicalSkills&&e.jsxs("div",{className:"rounded-lg bg-gray-700/50 p-4",children:[e.jsx("h3",{className:"mb-2 font-bold text-blue-300",children:"Technical Skills"}),e.jsx("div",{className:"whitespace-pre-wrap text-gray-300",children:s.technicalSkills})]}),s.relatedExperience&&e.jsxs("div",{className:"rounded-lg bg-gray-700/50 p-4",children:[e.jsx("h3",{className:"mb-2 font-bold text-blue-300",children:"Related Experience"}),e.jsx("div",{className:"whitespace-pre-wrap text-gray-300",children:s.relatedExperience})]}),s.honorsAndActivities&&e.jsxs("div",{className:"rounded-lg bg-gray-700/50 p-4",children:[e.jsx("h3",{className:"mb-2 font-bold text-blue-300",children:"Honors & Activities"}),e.jsx("div",{className:"whitespace-pre-wrap text-gray-300",children:s.honorsAndActivities})]}),!Object.values(s).some(t=>t.trim())&&e.jsxs("div",{className:"py-8 text-center text-gray-400",children:[e.jsx("div",{className:"mb-2 text-4xl",children:"📝"}),e.jsx("p",{children:"Start filling out the form to see your resume preview here!"})]})]})]})]}),k&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"mx-4 max-w-md rounded-xl border border-green-500/20 bg-gray-800 p-6 text-white shadow-2xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-4 text-5xl",children:"🎉"}),e.jsx("h3",{className:"mb-4 text-2xl font-bold text-green-400",children:"Success!"}),e.jsx("p",{className:"mb-4 text-gray-300",children:"We successfully generated your AI-powered resume!"}),e.jsxs("div",{className:"mb-6 rounded-lg border border-green-500/20 bg-green-900/20 p-4",children:[e.jsxs("div",{className:"font-semibold text-green-400",children:["ATS Score: ",N,"%"]}),e.jsx("div",{className:"mt-1 text-sm text-gray-400",children:"Your resume is optimized for Applicant Tracking Systems"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:E,className:"flex-1 rounded-lg bg-green-600 px-4 py-3 font-bold text-white transition-colors hover:bg-green-700",children:"📥 Download PDF"}),e.jsx("button",{onClick:()=>x(!1),className:"flex-1 rounded-lg bg-gray-600 px-4 py-3 font-bold text-white transition-colors hover:bg-gray-500",children:"Close"})]})]})})}),S&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"mx-4 max-w-md rounded-xl bg-gray-800 p-6 text-white shadow-2xl",children:[e.jsx("h3",{className:"mb-4 text-xl font-bold",children:"Welcome! 👋"}),e.jsxs("p",{className:"mb-4 text-gray-300",children:["Reminder: I'm not storing your information in the database and in fact, this is open source! You can visit the source code here:",e.jsx("a",{href:"https://github.com/PrinceSanguan/BIO_DATA_SAAS",target:"_blank",rel:"noopener noreferrer",className:"ml-1 text-blue-400 underline hover:text-blue-300",children:"https://github.com/PrinceSanguan"})]}),e.jsx("button",{onClick:C,className:"w-full rounded-lg bg-blue-600 px-4 py-2 font-bold text-white hover:bg-blue-700",children:"Got it!"})]})})]})]})})]})}export{T as default};
